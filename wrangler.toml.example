# KV Manager - Production Configuration Template
# Copy this to wrangler.toml and fill in your values

name = "kv-manager"
main = "worker/index.ts"
compatibility_date = "2025-01-01"
node_compat = true

# Build configuration for production
[build]
command = "npm run build"

# Static assets binding (your built frontend)
[site]
bucket = "./dist"

# Production D1 database
[[d1_databases]]
binding = "METADATA"
database_name = "kv-manager-metadata"
database_id = "YOUR_D1_DATABASE_ID" # Get this from: wrangler d1 create kv-manager-metadata

# R2 bucket for backups (optional)
# Create with: wrangler r2 bucket create kv-manager-backups
[[r2_buckets]]
binding = "BACKUP_BUCKET"
bucket_name = "kv-manager-backups"

# Durable Objects bindings
[[durable_objects.bindings]]
name = "BULK_OPERATION_DO"
class_name = "BulkOperationDO"
script_name = "kv-manager"

[[durable_objects.bindings]]
name = "IMPORT_EXPORT_DO"
class_name = "ImportExportDO"
script_name = "kv-manager"

# Durable Object migrations
[[migrations]]
tag = "v1"
new_classes = ["BulkOperationDO", "ImportExportDO"]

# Production environment variables
[vars]
ENVIRONMENT = "production"

# Secrets (set via: wrangler secret put SECRET_NAME)
# ACCOUNT_ID - Your Cloudflare account ID
# API_KEY - Your Cloudflare API token
# TEAM_DOMAIN - Your Cloudflare Access team domain (e.g., https://myteam.cloudflareaccess.com)
# POLICY_AUD - Your Cloudflare Access policy AUD tag

# Example KV namespace bindings (add as needed)
# [[kv_namespaces]]
# binding = "KV_your_namespace_id"
# id = "your_namespace_id"
